<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="10W+知乎用户数据可视化项目">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>知乎用户数据可视化</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.staticfile.org/echarts/4.7.0/echarts.min.js"></script>
  <script src="/js/main_control_functions.js"></script>
  <link rel="stylesheet" href="/css/preview.css" />
</head>

<body>
  <div id="loading-preview-animation" class="spinner" style="z-index:999;">
    <div class="spinner-container container1">
      <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div>
    </div>
    <div class="spinner-container container2">
      <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div>
    </div>
    <div class="spinner-container container3">
      <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div>
    </div>
  </div>

  <div id="echarts-name_follower_count" style="margin: 1em auto; width:1200px; height:600px;"></div>

  <script>
    var myChart = echarts.init(document.getElementById('echarts-name_follower_count'));
    $.getJSON("data/data_name_follower_count.json").then(data => {
      // 指定图表的配置项和数据
      var list_name = []
      var list_follower_count = []
      for(record in data["name"]){
        if(data["follower_count"][record] > 0){
          list_name.push(data["name"][record]);
          list_follower_count.push(data["follower_count"][record]);
        }
      }
      console.log(list_name);
      var option = {
        title: {
          left: "center",
          text: '知乎用户关注数'
        },
        tooltip: {
          trigger: 'axis',
          position: function (pt) {
            return [pt[0], '10%'];
          }
        },
        toolbox: {
          feature: {
            restore: {},
            saveAsImage: {}
          }
        },
        legend: {
            right: 20,
            // data: ['关注数', '收藏数'],
            // selected: { '关注数': true, '收藏数': false }   // false hides it
        },
        xAxis: {
          data: list_name
        },
        yAxis: {
          type: 'log',
          name: '关注数',
          minorSplitLine: {
            show: true
          }
        },
        dataZoom: [
          {
            type: 'inside',
            start: 0,
            end: 100,
          },
          {
            start: 0,
            end: 100,
          }
        ],
        series: [
          {
            name: '关注数',
            type: 'line',
            symbol: 'none',
            sampling: 'lttb',
            itemStyle: {
              color: 'rgb(255, 70, 131)'
            },
            areaStyle: {
              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                {
                  offset: 0,
                  color: 'rgb(255, 158, 68)'
                },
                {
                  offset: 1,
                  color: 'rgb(255, 70, 131)'
                }
              ])
            },
            data: list_follower_count
          },
        ]
      };
      // 使用刚指定的配置项和数据显示图表。
      myChart.setOption(option);
    })
    
  </script>

  <script>

    window.addEventListener('DOMContentLoaded', function() {
      close_loading_preview();
    });
    
  </script>

</body>